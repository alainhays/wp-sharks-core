(function(c){var b=rgvfbtgzxqrdbpcdjvzpcrfrsbtgpdvpMomentData;var a=bvtnafpwxwhxtzqwqumtmwfywfmmgffdPickadateData;if(typeof b.i18n[b.locale]==="object"){moment.updateLocale(b.locale,b.i18n[b.locale])}jsGridDateTimeFields=function(d){jsGrid.Field.call(this,d)};jsGridDateTimeFields.prototype=new jsGrid.Field({subType:"date-time",datePickerOptions:{},timePickerOptions:{},emptyDateTimeItemText:"—",emptyDateItemText:"—",emptyTimeItemText:"—",datePlaceholderText:"date",timePlaceholderText:"time",noTimeEquals:"startOfDay",_datePickerOptions:null,_timePickerOptions:null,_$dateEditInput:null,_$dateInsertInput:null,_$timeEditInput:null,_$timeInsertInput:null,editValue:function(){return this._actionTimestamp("edit",this.subType)},editTemplate:function(e,d){return this._actionTemplate("edit",this.subType,e)},insertValue:function(){return this._actionTimestamp("insert",this.subType)},insertTemplate:function(){return this._actionTemplate("insert",this.subType)},itemTemplate:function(e,d){return this._timestampFormat(e,this.subType,true)},sorter:function(e,d){return e-d},_pickerFunctionName:function(d){return"picka"+d},_pickerOptions:function(d){if(!this["_"+d+"PickerOptions"]){this["_"+d+"PickerOptions"]=c.extend({},a["default"+this._ucf(d)+"Options"],this[d+"PickerOptions"]);this["_"+d+"PickerOptions"].container=this._grid._container.parent();this["_"+d+"PickerOptions"].onClose=function(){c(document.activeElement).blur()}}return this["_"+d+"PickerOptions"]},_actionTimestamp:function(e,g){if(g==="date-time"){var d=c.trim(this["_$date"+this._ucf(e)+"Input"].val());var f=c.trim(this["_$time"+this._ucf(e)+"Input"].val());d=d==="0"?"":d;f=f==="0"?"":f;if(d&&!f&&this.noTimeEquals==="startOfDay"){f=moment.utc().startOf("day").format(this._pickerOptions("time").momentFormat)}else{if(d&&!f&&this.noTimeEquals==="endOfDay"){f=moment.utc().endOf("day").format(this._pickerOptions("time").momentFormat)}}if(d&&f){return this._formatToTimestamp(d+" "+f,g)}else{if(d){return this._formatToTimestamp(d,"date")}else{if(f){return this._formatToTimestamp(f,"time")}}}return 0}else{return this._formatToTimestamp(this["_$"+g+this._ucf(e)+"Input"].val(),g)}},_actionTemplate:function(f,g,e){if(f==="insert"&&!this.inserting){return null}else{if(f==="edit"&&!this.editing){return this.itemTemplate(e)}}if(g==="date-time"){if(this["_$date"+this._ucf(f)+"Input"]){this["_$date"+this._ucf(f)+"Input"][this._pickerFunctionName("date")]("stop")}if(this["_$time"+this._ucf(f)+"Input"]){this["_$time"+this._ucf(f)+"Input"][this._pickerFunctionName("time")]("stop")}this["_$date"+this._ucf(f)+"Input"]=c('<input placeholder="'+this.datePlaceholderText+'" value="'+(f==="edit"&&e?this._timestampFormat(e,"date"):"")+'" />');this["_$time"+this._ucf(f)+"Input"]=c('<input placeholder="'+this.timePlaceholderText+'" value="'+(f==="edit"&&e?this._timestampFormat(e,"time"):"")+'" />');setTimeout(function(){this["_$date"+this._ucf(f)+"Input"][this._pickerFunctionName("date")](this._pickerOptions("date"));this["_$time"+this._ucf(f)+"Input"][this._pickerFunctionName("time")](this._pickerOptions("time"))}.bind(this),100);var d=c('<table style="box-sizing:border-box; width:100%; border:0; padding:0; margin:0;"> <tbody>   <tr style="border:0; padding:0; margin:0;">     <td class="-date" style="box-sizing:border-box; width:70%; border:0; padding:0; margin:0;"></td>     <td class="-time" style="box-sizing:border-box; width:30%; border:0; padding:0; margin:0;"></td>   </tr> </tbody></table>');d.find(".-date").append(this["_$date"+this._ucf(f)+"Input"]);d.find(".-time").append(this["_$time"+this._ucf(f)+"Input"]);return d}else{if(this["_$"+g+this._ucf(f)+"Input"]){this["_$"+g+this._ucf(f)+"Input"][this._pickerFunctionName(g)]("stop")}this["_$"+g+this._ucf(f)+"Input"]=c('<input placeholder="'+this[g+"PlaceholderText"]+'" value="'+(f==="edit"&&e?this._timestampFormat(e,g):"")+'" />');setTimeout(function(){this["_$"+g+this._ucf(f)+"Input"][this._pickerFunctionName(g)](this._pickerOptions(g))}.bind(this),50);return this["_$"+g+this._ucf(f)+"Input"]}},_timestampFormat:function(e,f,d){if(!(e=parseInt(e))){if(d&&f==="date-time"){return this.emptyDateTimeItemText}else{if(d){return this["empty"+this._ucf(f)+"ItemText"]}}return""}if(f==="date-time"){return moment.utc(e,"X",b.locale).format(this._pickerOptions("date").momentFormat+" "+this._pickerOptions("time").momentFormat)+(d?" "+b.i18n.utc:"")}else{return moment.utc(e,"X",b.locale).format(this._pickerOptions(f).momentFormat)+(d?" "+b.i18n.utc:"")}},_formatToTimestamp:function(d,e){if(!(d=c.trim(d))||d==="0"){return 0}if(e==="date-time"){return parseInt(moment.utc(d,this._pickerOptions("date").momentFormat+" "+this._pickerOptions("time").momentFormat,b.locale).format("X"))}else{return parseInt(moment.utc(d,this._pickerOptions(e).momentFormat,b.locale).format("X"))}},_currentInputTableRow:function(){var e=this._$dateEditInput||this._$dateInsertInput||this._$timeEditInput||this._$timeInsertInput||null;var d=e?e.closest(".jsgrid-edit-row, .jsgrid-insert-row"):null;if(d&&d.length===1){return d}else{return null}},_ucf:function(d){return d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()}});jsGrid.fields.dateTime=jsGridDateTimeFields})(jQuery);