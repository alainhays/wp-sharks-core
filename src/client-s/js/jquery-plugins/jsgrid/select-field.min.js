(function(a){jsGrid.fields.select.prototype.allowOther=false;jsGrid.fields.select.prototype.otherPlaceholderText="";jsGrid.fields.select.prototype.editTemplate=function(c){if(!this.editing){return this.itemTemplate(c)}var b=this._createSelect(c);this.editControl=b;if(c!==undefined){b.val(String(c))}return b};jsGrid.fields.select.prototype._valueItem=function(c){var b;if(this.valueField){b=a.grep(this.items,function(e,d){return e[this.valueField]===c}.bind(this))[0]||undefined}else{b=this.items[c]}return b};jsGrid.fields.select.prototype.itemTemplate=function(c){var b=this._valueItem(c),d="";if(c!==undefined&&b===undefined&&!this.readOnly&&this.allowOther){d=String(c!==undefined?c:"");return _.escape(d)}else{d=b&&this.textField?b[this.textField]:b;d=String(d===undefined?"":d);return _.escape(d)}};jsGrid.fields.select.prototype._createSelect=function(f){var c=a("<select>"),d=c,e=null,g=null,b;c.prop("disabled",this.readOnly);a.each(this.items,function(h,i){var j=String(this.valueField?i[this.valueField]:h),k=String(this.textField?i[this.textField]:i);if(k==="---"){e=a("<optgroup>").attr("label",j.replace(/^[\s\-]+|[\s\-]+$/g,"")).appendTo(c)}else{g=a("<option>").attr("value",j).text(k).prop("selected",this.selectedIndex===h).appendTo(e?e:c)}}.bind(this));if(!this.readOnly&&this.allowOther){if(f!==undefined){b=this._valueItem(f)}if(f!==undefined&&b===undefined){d=this._createInput();setTimeout(function(){if(a.contains(document,d[0])){d.after(this._createInputOff(d));d.parent().css("position","relative")}}.bind(this),500)}else{c.on("change",function(h){if(c.val()==="other"){d=this._convertToInput(c)}}.bind(this))}}return d};jsGrid.fields.select.prototype._createInput=function(){var b=a("<input>").attr("type","text");b.attr("placeholder",this.otherPlaceholderText);return b};jsGrid.fields.select.prototype._createInputOff=function(c){var b=a('<a href="#">&#x2261;</a>');b.css({top:0,right:0,width:"13px",height:"13px","line-height":"13px","border-radius":"50%",position:"absolute",color:"#000","font-size":"10px","text-rendering":"geometricPrecision","font-family":"tahoma,arial,verdana,monospace","text-decoration":"none",background:"#dcdcdc"}).on("click",function(d){d.preventDefault();d.stopImmediatePropagation();this._convertToSelect(c);a(d.target).remove()}.bind(this));return b};jsGrid.fields.select.prototype._convertToInput=function(c){this.selectedIndex=-1;var d=this._createInput();var b=this._createInputOff(d);c.replaceWith(d);if(this.insertControl){this.insertControl=d}if(this.editControl){this.editControl=d}if(this.filterControl){this.filterControl=d}d.focus();d.after(b);d.parent().css("position","relative");return d};jsGrid.fields.select.prototype._convertToSelect=function(c){this.selectedIndex=-1;var b=this._createSelect();c.replaceWith(b);if(this.insertControl){this.insertControl=b}if(this.editControl){this.editControl=b}if(this.filterControl){this.filterControl=b}return b}})(jQuery);